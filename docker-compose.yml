version: '3.3'
services:
    card-scan:
        container_name: card-scan
        ports:
            - '8008:80'
        volumes:
            - '/var/log/card-scan:/app/log'
        environment:
            - TZ=Asia/Tbilisi
            - ASPNETCORE_ENVIRONMENT=Production
            - VIRTUAL_HOST=card-scan.farhadmammadli.com
        logging:
            driver: "json-file"
            options:
                max-size: "200k"
                max-file: "10"
        cpu_count: 2
        cpu_percent: 50
        cpus: 1
        mem_limit: 256m
        mem_reservation: 256m
        build:
            context: .
            dockerfile: Dockerfile
        network_mode: bridge
        image: card-scan
